{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\n\nvar ObjectUtils_1 = require(\"../utils/ObjectUtils\"),\n    ArrayUtils_1 = require(\"../utils/ArrayUtils\"),\n    StringUtils_1 = require(\"../utils/StringUtils\"),\n    ModelHistoryManager = function () {\n  function t(t) {\n    this.maxSnapshots = -1, this._snapshots = [], this._currentState = t, this._initialState = ObjectUtils_1.ObjectUtils.clone(this._currentState);\n  }\n\n  return t.prototype.setInitialState = function () {\n    this._initialState = ObjectUtils_1.ObjectUtils.clone(this._currentState), this._snapshots = [];\n  }, Object.defineProperty(t.prototype, \"get\", {\n    get: function get() {\n      return this._currentState;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"tags\", {\n    get: function get() {\n      return this._snapshots.map(function (t) {\n        return t.tag;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"snapshots\", {\n    get: function get() {\n      return this._snapshots.map(function (t) {\n        return t.state;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.getSnapshotsByTag = function (t) {\n    var s = \"tags must be a non empty string array. To get the full list of snapshots, use the <snapshots> property\";\n    if (!ArrayUtils_1.ArrayUtils.isArray(t)) throw new Error(s);\n    if (t.length <= 0) throw new Error(s);\n\n    for (var e = [], i = 0; i < this._snapshots.length; i++) {\n      t.indexOf(this._snapshots[i].tag) >= 0 && e.push(this._snapshots[i].state);\n    }\n\n    return e;\n  }, t.prototype.saveSnapshot = function (t) {\n    if (void 0 === t && (t = \"\"), !StringUtils_1.StringUtils.isString(t)) throw new Error(\"tag must be a string\");\n    if (this._snapshots.length > 0 && this._snapshots[this._snapshots.length - 1].tag === t && ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._snapshots[this._snapshots.length - 1].state)) return !1;\n    if (this._snapshots.length <= 0 && ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._initialState)) return !1;\n\n    if (this.maxSnapshots > 0 && this._snapshots.length >= this.maxSnapshots) {\n      var s = this._snapshots.shift();\n\n      this._initialState = s.state;\n    }\n\n    return this._snapshots.push({\n      state: ObjectUtils_1.ObjectUtils.clone(this._currentState),\n      tag: t\n    }), !0;\n  }, Object.defineProperty(t.prototype, \"isUndoPossible\", {\n    get: function get() {\n      return this._snapshots.length > 0 || !ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._initialState);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.undo = function (t) {\n    if (void 0 === t && (t = []), 0 === this._snapshots.length && !ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, this._initialState)) return this._currentState = ObjectUtils_1.ObjectUtils.clone(this._initialState), !0;\n\n    if (this._snapshots.length > 0) {\n      var s = this._snapshots[this._snapshots.length - 1];\n      return ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState, s.state) || t.length > 0 && t.indexOf(s.tag) < 0 ? (this._snapshots.pop(), this.undo(t)) : (this._currentState = ObjectUtils_1.ObjectUtils.clone(s.state), !0);\n    }\n\n    return !1;\n  }, t.prototype.undoAll = function () {\n    return !!this.isUndoPossible && (this._currentState = ObjectUtils_1.ObjectUtils.clone(this._initialState), this._snapshots = [], !0);\n  }, t.prototype.redo = function () {}, t;\n}();\n\nexports.ModelHistoryManager = ModelHistoryManager;","map":{"version":3,"sources":["/Users/stefan_rmmr/software_dev/beat_inspector/st_audiorec/frontend/node_modules/turbocommons-ts/managers/ModelHistoryManager.js"],"names":["Object","defineProperty","exports","value","ObjectUtils_1","require","ArrayUtils_1","StringUtils_1","ModelHistoryManager","t","maxSnapshots","_snapshots","_currentState","_initialState","ObjectUtils","clone","prototype","setInitialState","get","enumerable","configurable","map","tag","state","getSnapshotsByTag","s","ArrayUtils","isArray","Error","length","e","i","indexOf","push","saveSnapshot","StringUtils","isString","isEqualTo","shift","undo","pop","undoAll","isUndoPossible","redo"],"mappings":"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","sourcesContent":["\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var ObjectUtils_1=require(\"../utils/ObjectUtils\"),ArrayUtils_1=require(\"../utils/ArrayUtils\"),StringUtils_1=require(\"../utils/StringUtils\"),ModelHistoryManager=function(){function t(t){this.maxSnapshots=-1,this._snapshots=[],this._currentState=t,this._initialState=ObjectUtils_1.ObjectUtils.clone(this._currentState)}return t.prototype.setInitialState=function(){this._initialState=ObjectUtils_1.ObjectUtils.clone(this._currentState),this._snapshots=[]},Object.defineProperty(t.prototype,\"get\",{get:function(){return this._currentState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"tags\",{get:function(){return this._snapshots.map(function(t){return t.tag})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"snapshots\",{get:function(){return this._snapshots.map(function(t){return t.state})},enumerable:!0,configurable:!0}),t.prototype.getSnapshotsByTag=function(t){var s=\"tags must be a non empty string array. To get the full list of snapshots, use the <snapshots> property\";if(!ArrayUtils_1.ArrayUtils.isArray(t))throw new Error(s);if(t.length<=0)throw new Error(s);for(var e=[],i=0;i<this._snapshots.length;i++)t.indexOf(this._snapshots[i].tag)>=0&&e.push(this._snapshots[i].state);return e},t.prototype.saveSnapshot=function(t){if(void 0===t&&(t=\"\"),!StringUtils_1.StringUtils.isString(t))throw new Error(\"tag must be a string\");if(this._snapshots.length>0&&this._snapshots[this._snapshots.length-1].tag===t&&ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState,this._snapshots[this._snapshots.length-1].state))return!1;if(this._snapshots.length<=0&&ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState,this._initialState))return!1;if(this.maxSnapshots>0&&this._snapshots.length>=this.maxSnapshots){var s=this._snapshots.shift();this._initialState=s.state}return this._snapshots.push({state:ObjectUtils_1.ObjectUtils.clone(this._currentState),tag:t}),!0},Object.defineProperty(t.prototype,\"isUndoPossible\",{get:function(){return this._snapshots.length>0||!ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState,this._initialState)},enumerable:!0,configurable:!0}),t.prototype.undo=function(t){if(void 0===t&&(t=[]),0===this._snapshots.length&&!ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState,this._initialState))return this._currentState=ObjectUtils_1.ObjectUtils.clone(this._initialState),!0;if(this._snapshots.length>0){var s=this._snapshots[this._snapshots.length-1];return ObjectUtils_1.ObjectUtils.isEqualTo(this._currentState,s.state)||t.length>0&&t.indexOf(s.tag)<0?(this._snapshots.pop(),this.undo(t)):(this._currentState=ObjectUtils_1.ObjectUtils.clone(s.state),!0)}return!1},t.prototype.undoAll=function(){return!!this.isUndoPossible&&(this._currentState=ObjectUtils_1.ObjectUtils.clone(this._initialState),this._snapshots=[],!0)},t.prototype.redo=function(){},t}();exports.ModelHistoryManager=ModelHistoryManager;"]},"metadata":{},"sourceType":"script"}