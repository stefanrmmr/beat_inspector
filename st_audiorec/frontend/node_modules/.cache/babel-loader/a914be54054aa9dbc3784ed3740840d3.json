{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\n\nvar turbocommons_ts_1 = require(\"turbocommons-ts\"),\n    FilesManager = function () {\n  function t(t) {\n    if (void 0 === t && (t = \"\"), this._rootPath = \"\", this.fs = require(\"fs\"), this.os = require(\"os\"), this.path = require(\"path\"), this.crypto = require(\"crypto\"), !turbocommons_ts_1.StringUtils.isString(t)) throw new Error(\"rootPath must be a string\");\n    if (this._rootPath = turbocommons_ts_1.StringUtils.formatPath(t), \"\" !== this._rootPath && !this.isDirectory(this._rootPath)) throw new Error(\"Specified rootPath does not exist: \" + t);\n  }\n\n  return t.prototype.dirSep = function () {\n    return this.path.sep;\n  }, t.prototype.isPathAbsolute = function (t) {\n    if (turbocommons_ts_1.StringUtils.isString(t)) {\n      var r = t.length,\n          e = r > 0 && /^[a-zA-Z]+$/.test(t.charAt(0));\n      return 0 === t.indexOf(\"/\") || 0 === t.indexOf(\"\\\\\") || 2 === r && e && \":\" === t.charAt(1) || r > 2 && e && \":\" === t.charAt(1) && (2 === t.indexOf(\"/\") || 2 === t.indexOf(\"\\\\\"));\n    }\n\n    throw new Error(\"path must be a string\");\n  }, t.prototype.isFile = function (t) {\n    if (!turbocommons_ts_1.StringUtils.isString(t)) throw new Error(\"path must be a string\");\n\n    try {\n      return this.fs.lstatSync(this._composePath(t)).isFile();\n    } catch (t) {\n      return !1;\n    }\n  }, t.prototype.isFileEqualTo = function (t, r) {\n    return t = this._composePath(t, !1, !0), r = this._composePath(r, !1, !0), this.getFileSize(t) === this.getFileSize(r) && this.crypto.createHash(\"md5\").update(this.readFile(t), \"utf8\").digest(\"hex\") === this.crypto.createHash(\"md5\").update(this.readFile(r), \"utf8\").digest(\"hex\");\n  }, t.prototype.isDirectory = function (t) {\n    if (!turbocommons_ts_1.StringUtils.isString(t)) throw new Error(\"path must be a string\");\n    if (t = this._composePath(t), turbocommons_ts_1.StringUtils.isEmpty(t)) return !1;\n\n    try {\n      return this.fs.lstatSync(this.fs.realpathSync(t)).isDirectory();\n    } catch (t) {\n      return !1;\n    }\n  }, t.prototype.isDirectoryEqualTo = function (t, r) {\n    t = this._composePath(t), r = this._composePath(r);\n    var e = this.getDirectoryList(t, \"nameAsc\"),\n        i = this.getDirectoryList(r, \"nameAsc\");\n    if (!turbocommons_ts_1.ArrayUtils.isEqualTo(e, i)) return !1;\n\n    for (var o = 0; o < e.length; o++) {\n      var s = t + this.dirSep() + e[o],\n          n = r + this.dirSep() + i[o],\n          h = this.isDirectory(s);\n      if (h && !this.isDirectoryEqualTo(s, n)) return !1;\n      if (!h && !this.isFileEqualTo(s, n)) return !1;\n    }\n\n    return !0;\n  }, t.prototype.isDirectoryEmpty = function (t) {\n    return this.getDirectoryList(t).length <= 0;\n  }, t.prototype.countDirectoryItems = function (t, r, e, i, o) {\n    return void 0 === r && (r = \"both\"), void 0 === e && (e = -1), void 0 === i && (i = /.*/), void 0 === o && (o = \"\"), this.findDirectoryItems(t, i, \"relative\", r, e, o).length;\n  }, t.prototype.findDirectoryItems = function (t, r, e, i, o, s, n) {\n    void 0 === e && (e = \"relative\"), void 0 === i && (i = \"both\"), void 0 === o && (o = -1), void 0 === s && (s = \"\"), void 0 === n && (n = \"name\");\n    var h = [];\n    t = this._composePath(t);\n\n    for (var c = 0, a = this.getDirectoryList(t); c < a.length; c++) {\n      var p = a[c],\n          u = t + this.dirSep() + p,\n          m = \"absolute\" === n ? u : p;\n\n      if (!(\"\" !== s && new RegExp(s).test(u) || \"folders\" === i && this.isFile(u))) {\n        var l = this.isDirectory(u);\n        !new RegExp(r).test(m) || \"files\" === i && l || h.push(u), 0 !== o && l && (h = h.concat(this.findDirectoryItems(u, r, \"absolute\", i, o - 1, s, n)));\n      }\n    }\n\n    if (\"absolute\" !== e) for (var f = 0; f < h.length; f++) {\n      h[f] = \"name\" === e ? turbocommons_ts_1.StringUtils.getPathElement(h[f]) : turbocommons_ts_1.StringUtils.replace(h[f], t + this.dirSep(), \"\");\n    }\n    return h;\n  }, t.prototype.findUniqueDirectoryName = function (t, r, e, i, o) {\n    if (void 0 === r && (r = \"\"), void 0 === e && (e = \"\"), void 0 === i && (i = \"-\"), void 0 === o && (o = !1), !turbocommons_ts_1.StringUtils.isString(t)) throw new Error(\"path must be a string\");\n    if (!turbocommons_ts_1.StringUtils.isString(r)) throw new Error(\"desiredName must be a string\");\n    if (!turbocommons_ts_1.StringUtils.isString(e)) throw new Error(\"text must be a string\");\n    if (!turbocommons_ts_1.StringUtils.isString(i)) throw new Error(\"separator must be a string\");\n    t = this._composePath(t, !0);\n\n    for (var s = 1, n = turbocommons_ts_1.StringUtils.isEmpty(r) ? String(s) : r; this.isDirectory(t + this.dirSep() + n) || this.isFile(t + this.dirSep() + n);) {\n      n = this._generateUniqueNameAux(s, r, e, i, o), s++;\n    }\n\n    return n;\n  }, t.prototype.findUniqueFileName = function (t, r, e, i, o) {\n    void 0 === r && (r = \"\"), void 0 === e && (e = \"\"), void 0 === i && (i = \"-\"), void 0 === o && (o = !1);\n    var s = 1,\n        n = \"\" == r ? s : r;\n    t = this._composePath(t, !0);\n    var h = turbocommons_ts_1.StringUtils.getPathExtension(r);\n\n    for (\"\" !== h && (h = \".\" + h); this.isDirectory(t + this.dirSep() + n) || this.isFile(t + this.dirSep() + n);) {\n      n = this._generateUniqueNameAux(s, turbocommons_ts_1.StringUtils.getPathElementWithoutExt(r), e, i, o) + h, s++;\n    }\n\n    return n;\n  }, t.prototype.createDirectory = function (t, r) {\n    if (void 0 === r && (r = !1), t = this._composePath(t), this.isDirectory(t)) return !1;\n    if (this.isFile(t)) throw new Error(\"specified path is an existing file \" + t);\n\n    try {\n      if (r) for (var e = \"\", i = 0; i < turbocommons_ts_1.StringUtils.countPathElements(t); i++) {\n        e += turbocommons_ts_1.StringUtils.getPathElement(t, i) + this.dirSep(), this.isDirectory(e) || this.fs.mkdirSync(e);\n      } else this.fs.mkdirSync(t);\n    } catch (r) {\n      if (!this.isDirectory(t)) throw r;\n      return !1;\n    }\n\n    return !0;\n  }, t.prototype.getOSTempDirectory = function () {\n    return turbocommons_ts_1.StringUtils.formatPath(this.os.tmpdir(), this.dirSep());\n  }, t.prototype.createTempDirectory = function (r, e) {\n    var i = this;\n    void 0 === e && (e = !0);\n    var o = this.getOSTempDirectory(),\n        s = o + this.dirSep() + this.findUniqueDirectoryName(o, r);\n    if (!this.createDirectory(s)) throw new Error(\"Could not create TMP directory \" + s);\n    return e && (t._tempDirectoriesToDelete.push(s), t._tempDirectoriesToDelete.length < 2 && process.once(\"exit\", function () {\n      for (var r = 0, e = t._tempDirectoriesToDelete; r < e.length; r++) {\n        var o = e[r];\n        i.isDirectory(o) && i.deleteDirectory(o);\n      }\n    })), s;\n  }, t.prototype.getDirectoryList = function (t, r) {\n    void 0 === r && (r = \"\"), t = this._composePath(t, !0);\n\n    for (var e = [], i = 0, o = this.fs.readdirSync(t); i < o.length; i++) {\n      var s = o[i];\n      if (\".\" !== s && \"..\" !== s) switch (r) {\n        case \"mDateAsc\":\n        case \"mDateDesc\":\n          break;\n\n        default:\n          e.push(s);\n      }\n    }\n\n    switch (r) {\n      case \"nameAsc\":\n        e.sort();\n        break;\n\n      case \"nameDesc\":\n        e.sort(), e.reverse();\n        break;\n\n      case \"mDateAsc\":\n      case \"mDateDesc\":\n        break;\n\n      default:\n        if (\"\" !== r) throw new Error(\"Unknown sort method\");\n    }\n\n    return e;\n  }, t.prototype.getDirectorySize = function (t) {\n    t = this._composePath(t);\n\n    for (var r = 0, e = 0, i = this.getDirectoryList(t); e < i.length; e++) {\n      var o = i[e],\n          s = t + this.dirSep() + o;\n      r += this.isDirectory(s) ? this.getDirectorySize(s) : this.getFileSize(s);\n    }\n\n    return r;\n  }, t.prototype.copyDirectory = function (t, r, e) {\n    if (void 0 === e && (e = !0), (t = this._composePath(t)) === (r = this._composePath(r))) throw new Error(\"cannot copy a directory into itself: \" + t);\n    if (e && !this.isDirectoryEmpty(r)) throw new Error(\"destPath must be empty\");\n\n    for (var i = 0, o = this.getDirectoryList(t); i < o.length; i++) {\n      var s = o[i],\n          n = t + this.dirSep() + s,\n          h = r + this.dirSep() + s;\n\n      if (this.isDirectory(n)) {\n        if (!this.isDirectory(h) && !this.createDirectory(h)) return !1;\n        if (!this.copyDirectory(n, h, e)) return !1;\n      } else if (!this.copyFile(n, h)) return !1;\n    }\n\n    return !0;\n  }, t.prototype.mirrorDirectory = function (t, r, e) {\n    if (void 0 === e && (e = 15), (t = this._composePath(t, !0)) === (r = this._composePath(r, !0))) throw new Error(\"cannot mirror a directory into itself: \" + t);\n\n    for (var i = 0, o = this.getDirectoryList(t); i < o.length; i++) {\n      var s = o[i],\n          n = t + this.dirSep() + s,\n          h = r + this.dirSep() + s,\n          c = this.isDirectory(h),\n          a = this.isFile(h);\n      if (this.isDirectory(n)) a && this.deleteFile(h, e), c || this.createDirectory(h), this.mirrorDirectory(n, h, e);else if (c && this.deleteDirectory(h, !0, e), !(a && this.isFileEqualTo(n, h) || this.copyFile(n, h))) throw new Error(\"Could not copy file from source <\" + n + \"> to destination <\" + h + \">\");\n    }\n\n    for (var p = 0, u = this.getDirectoryList(r); p < u.length; p++) {\n      var m = u[p];\n      n = t + this.dirSep() + m, h = r + this.dirSep() + m;\n      this.isDirectory(h) ? this.isDirectory(n) ? this.mirrorDirectory(n, h, e) : this.deleteDirectory(h, !0, e) : this.isFile(n) || this.deleteFile(h, e);\n    }\n\n    return !0;\n  }, t.prototype.syncDirectories = function () {}, t.prototype.renameDirectory = function (t, r, e) {\n    return void 0 === e && (e = 15), this._renameFSResource(this._composePath(t, !0), this._composePath(r), e);\n  }, t.prototype._renameFSResource = function (t, r, e) {\n    if (this.isDirectory(r) || this.isFile(r)) throw new Error(\"Invalid destination: \" + r);\n    if (this.path.resolve(turbocommons_ts_1.StringUtils.getPath(t)) !== this.path.resolve(turbocommons_ts_1.StringUtils.getPath(r))) throw new Error(\"Source and dest must be on the same path\");\n    var i = \"\",\n        o = 0,\n        s = Math.floor(Date.now() / 1e3);\n\n    do {\n      try {\n        return this.fs.renameSync(t, r), !0;\n      } catch (t) {\n        i = t.toString();\n      }\n\n      o = Math.floor(Date.now() / 1e3) - s;\n    } while (o < e);\n\n    throw new Error(\"Error renaming (\" + o + \" seconds timeout):\\n\" + t + \"\\n\" + i);\n  }, t.prototype.deleteDirectory = function (t, r, e) {\n    void 0 === r && (r = !0), void 0 === e && (e = 15);\n    var i = 0;\n    t = this._composePath(t, !0);\n\n    for (var o = 0, s = this.getDirectoryList(t); o < s.length; o++) {\n      var n = s[o];\n      this.isDirectory(t + this.dirSep() + n) ? i += this.deleteDirectory(t + this.dirSep() + n, !0, e) : (this.deleteFile(t + this.dirSep() + n, e), i++);\n    }\n\n    if (r) {\n      var h = \"\",\n          c = 0,\n          a = Math.floor(Date.now() / 1e3);\n\n      do {\n        try {\n          return this.fs.rmdirSync(t), i;\n        } catch (t) {\n          h = t.toString();\n        }\n\n        c = Math.floor(Date.now() / 1e3) - a;\n      } while (c < e);\n\n      throw new Error(\"Could not delete directory itself (\" + c + \" seconds timeout):\\n\" + t + \"\\n\" + h);\n    }\n\n    return i;\n  }, t.prototype.saveFile = function (t, r, e, i) {\n    void 0 === r && (r = \"\"), void 0 === e && (e = !1), void 0 === i && (i = !1), t = this._composePath(t), i && this.createDirectory(turbocommons_ts_1.StringUtils.getPath(t), !0);\n\n    try {\n      return e ? this.fs.appendFileSync(t, r) : this.fs.writeFileSync(t, r), !0;\n    } catch (r) {\n      throw new Error(\"Could not write to file: \" + t);\n    }\n  }, t.prototype.createTempFile = function () {}, t.prototype.mergeFiles = function (t, r, e) {\n    void 0 === e && (e = \"\");\n\n    for (var i = \"\", o = 0; o < t.length; o++) {\n      i += this.readFile(this._composePath(t[o])), o < t.length - 1 && \"\" !== e && (i += e);\n    }\n\n    return this.saveFile(r, i);\n  }, t.prototype.getFileSize = function (t) {\n    t = this._composePath(t, !1, !0);\n\n    try {\n      return this.fs.statSync(t).size;\n    } catch (t) {\n      throw new Error(\"Error reading file size\");\n    }\n  }, t.prototype.getFileModificationTime = function (t) {\n    return t;\n  }, t.prototype.readFile = function (t) {\n    return t = this._composePath(t, !1, !0), this.fs.readFileSync(t, \"utf8\");\n  }, t.prototype.readFileBuffered = function () {}, t.prototype.copyFile = function (t, r) {\n    t = this._composePath(t), r = this._composePath(r);\n\n    try {\n      return this.fs.copyFileSync(t, r), !0;\n    } catch (t) {\n      return !1;\n    }\n  }, t.prototype.renameFile = function (t, r, e) {\n    return void 0 === e && (e = 15), this._renameFSResource(this._composePath(t, !1, !0), this._composePath(r), e);\n  }, t.prototype.deleteFile = function (t, r) {\n    void 0 === r && (r = 15), t = this._composePath(t, !1, !0);\n    var e = \"\",\n        i = 0,\n        o = Math.floor(Date.now() / 1e3);\n\n    do {\n      try {\n        return this.fs.unlinkSync(t), !0;\n      } catch (t) {\n        e = t.toString();\n      }\n\n      i = Math.floor(Date.now() / 1e3) - o;\n    } while (i < r);\n\n    throw new Error(\"Error deleting file (\" + i + \" seconds timeout):\\n\" + t + \"\\n\" + e);\n  }, t.prototype.deleteFiles = function (t, r) {\n    void 0 === r && (r = 15);\n\n    for (var e = 0, i = t; e < i.length; e++) {\n      var o = i[e];\n      this.deleteFile(o, r);\n    }\n\n    return !0;\n  }, t.prototype._generateUniqueNameAux = function (t, r, e, i, o) {\n    var s = [];\n    return o ? (\"\" !== e && s.push(e), s.push(String(t)), \"\" !== r && s.push(r)) : (\"\" !== r && s.push(r), \"\" !== e && s.push(e), s.push(String(t))), s.join(i);\n  }, t.prototype._composePath = function (t, r, e) {\n    if (void 0 === r && (r = !1), void 0 === e && (e = !1), !turbocommons_ts_1.StringUtils.isString(t)) throw new Error(\"Path must be a string\");\n    var i = \"\";\n    i = turbocommons_ts_1.StringUtils.isEmpty(this._rootPath) || this.isPathAbsolute(t) ? t : this._rootPath + this.dirSep() + t;\n    var o = turbocommons_ts_1.StringUtils.formatPath(i, this.dirSep());\n    if (r && !this.isDirectory(o)) throw new Error(\"Path does not exist: \" + o);\n    if (e && !this.isFile(o)) throw new Error(\"File does not exist: \" + o);\n    return o;\n  }, t._tempDirectoriesToDelete = [], t;\n}();\n\nexports.FilesManager = FilesManager;","map":{"version":3,"sources":["/Users/stefan_rmmr/software_dev/beat_inspector/st_audiorec/frontend/node_modules/turbodepot-node/managers/FilesManager.js"],"names":["Object","defineProperty","exports","value","turbocommons_ts_1","require","FilesManager","t","_rootPath","fs","os","path","crypto","StringUtils","isString","Error","formatPath","isDirectory","prototype","dirSep","sep","isPathAbsolute","r","length","e","test","charAt","indexOf","isFile","lstatSync","_composePath","isFileEqualTo","getFileSize","createHash","update","readFile","digest","isEmpty","realpathSync","isDirectoryEqualTo","getDirectoryList","i","ArrayUtils","isEqualTo","o","s","n","h","isDirectoryEmpty","countDirectoryItems","findDirectoryItems","c","a","p","u","m","RegExp","l","push","concat","f","getPathElement","replace","findUniqueDirectoryName","String","_generateUniqueNameAux","findUniqueFileName","getPathExtension","getPathElementWithoutExt","createDirectory","countPathElements","mkdirSync","getOSTempDirectory","tmpdir","createTempDirectory","_tempDirectoriesToDelete","process","once","deleteDirectory","readdirSync","sort","reverse","getDirectorySize","copyDirectory","copyFile","mirrorDirectory","deleteFile","syncDirectories","renameDirectory","_renameFSResource","resolve","getPath","Math","floor","Date","now","renameSync","toString","rmdirSync","saveFile","appendFileSync","writeFileSync","createTempFile","mergeFiles","statSync","size","getFileModificationTime","readFileSync","readFileBuffered","copyFileSync","renameFile","unlinkSync","deleteFiles","join"],"mappings":"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","sourcesContent":["\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var turbocommons_ts_1=require(\"turbocommons-ts\"),FilesManager=function(){function t(t){if(void 0===t&&(t=\"\"),this._rootPath=\"\",this.fs=require(\"fs\"),this.os=require(\"os\"),this.path=require(\"path\"),this.crypto=require(\"crypto\"),!turbocommons_ts_1.StringUtils.isString(t))throw new Error(\"rootPath must be a string\");if(this._rootPath=turbocommons_ts_1.StringUtils.formatPath(t),\"\"!==this._rootPath&&!this.isDirectory(this._rootPath))throw new Error(\"Specified rootPath does not exist: \"+t)}return t.prototype.dirSep=function(){return this.path.sep},t.prototype.isPathAbsolute=function(t){if(turbocommons_ts_1.StringUtils.isString(t)){var r=t.length,e=r>0&&/^[a-zA-Z]+$/.test(t.charAt(0));return 0===t.indexOf(\"/\")||0===t.indexOf(\"\\\\\")||2===r&&e&&\":\"===t.charAt(1)||r>2&&e&&\":\"===t.charAt(1)&&(2===t.indexOf(\"/\")||2===t.indexOf(\"\\\\\"))}throw new Error(\"path must be a string\")},t.prototype.isFile=function(t){if(!turbocommons_ts_1.StringUtils.isString(t))throw new Error(\"path must be a string\");try{return this.fs.lstatSync(this._composePath(t)).isFile()}catch(t){return!1}},t.prototype.isFileEqualTo=function(t,r){return t=this._composePath(t,!1,!0),r=this._composePath(r,!1,!0),this.getFileSize(t)===this.getFileSize(r)&&this.crypto.createHash(\"md5\").update(this.readFile(t),\"utf8\").digest(\"hex\")===this.crypto.createHash(\"md5\").update(this.readFile(r),\"utf8\").digest(\"hex\")},t.prototype.isDirectory=function(t){if(!turbocommons_ts_1.StringUtils.isString(t))throw new Error(\"path must be a string\");if(t=this._composePath(t),turbocommons_ts_1.StringUtils.isEmpty(t))return!1;try{return this.fs.lstatSync(this.fs.realpathSync(t)).isDirectory()}catch(t){return!1}},t.prototype.isDirectoryEqualTo=function(t,r){t=this._composePath(t),r=this._composePath(r);var e=this.getDirectoryList(t,\"nameAsc\"),i=this.getDirectoryList(r,\"nameAsc\");if(!turbocommons_ts_1.ArrayUtils.isEqualTo(e,i))return!1;for(var o=0;o<e.length;o++){var s=t+this.dirSep()+e[o],n=r+this.dirSep()+i[o],h=this.isDirectory(s);if(h&&!this.isDirectoryEqualTo(s,n))return!1;if(!h&&!this.isFileEqualTo(s,n))return!1}return!0},t.prototype.isDirectoryEmpty=function(t){return this.getDirectoryList(t).length<=0},t.prototype.countDirectoryItems=function(t,r,e,i,o){return void 0===r&&(r=\"both\"),void 0===e&&(e=-1),void 0===i&&(i=/.*/),void 0===o&&(o=\"\"),this.findDirectoryItems(t,i,\"relative\",r,e,o).length},t.prototype.findDirectoryItems=function(t,r,e,i,o,s,n){void 0===e&&(e=\"relative\"),void 0===i&&(i=\"both\"),void 0===o&&(o=-1),void 0===s&&(s=\"\"),void 0===n&&(n=\"name\");var h=[];t=this._composePath(t);for(var c=0,a=this.getDirectoryList(t);c<a.length;c++){var p=a[c],u=t+this.dirSep()+p,m=\"absolute\"===n?u:p;if(!(\"\"!==s&&new RegExp(s).test(u)||\"folders\"===i&&this.isFile(u))){var l=this.isDirectory(u);!new RegExp(r).test(m)||\"files\"===i&&l||h.push(u),0!==o&&l&&(h=h.concat(this.findDirectoryItems(u,r,\"absolute\",i,o-1,s,n)))}}if(\"absolute\"!==e)for(var f=0;f<h.length;f++)h[f]=\"name\"===e?turbocommons_ts_1.StringUtils.getPathElement(h[f]):turbocommons_ts_1.StringUtils.replace(h[f],t+this.dirSep(),\"\");return h},t.prototype.findUniqueDirectoryName=function(t,r,e,i,o){if(void 0===r&&(r=\"\"),void 0===e&&(e=\"\"),void 0===i&&(i=\"-\"),void 0===o&&(o=!1),!turbocommons_ts_1.StringUtils.isString(t))throw new Error(\"path must be a string\");if(!turbocommons_ts_1.StringUtils.isString(r))throw new Error(\"desiredName must be a string\");if(!turbocommons_ts_1.StringUtils.isString(e))throw new Error(\"text must be a string\");if(!turbocommons_ts_1.StringUtils.isString(i))throw new Error(\"separator must be a string\");t=this._composePath(t,!0);for(var s=1,n=turbocommons_ts_1.StringUtils.isEmpty(r)?String(s):r;this.isDirectory(t+this.dirSep()+n)||this.isFile(t+this.dirSep()+n);)n=this._generateUniqueNameAux(s,r,e,i,o),s++;return n},t.prototype.findUniqueFileName=function(t,r,e,i,o){void 0===r&&(r=\"\"),void 0===e&&(e=\"\"),void 0===i&&(i=\"-\"),void 0===o&&(o=!1);var s=1,n=\"\"==r?s:r;t=this._composePath(t,!0);var h=turbocommons_ts_1.StringUtils.getPathExtension(r);for(\"\"!==h&&(h=\".\"+h);this.isDirectory(t+this.dirSep()+n)||this.isFile(t+this.dirSep()+n);)n=this._generateUniqueNameAux(s,turbocommons_ts_1.StringUtils.getPathElementWithoutExt(r),e,i,o)+h,s++;return n},t.prototype.createDirectory=function(t,r){if(void 0===r&&(r=!1),t=this._composePath(t),this.isDirectory(t))return!1;if(this.isFile(t))throw new Error(\"specified path is an existing file \"+t);try{if(r)for(var e=\"\",i=0;i<turbocommons_ts_1.StringUtils.countPathElements(t);i++)e+=turbocommons_ts_1.StringUtils.getPathElement(t,i)+this.dirSep(),this.isDirectory(e)||this.fs.mkdirSync(e);else this.fs.mkdirSync(t)}catch(r){if(!this.isDirectory(t))throw r;return!1}return!0},t.prototype.getOSTempDirectory=function(){return turbocommons_ts_1.StringUtils.formatPath(this.os.tmpdir(),this.dirSep())},t.prototype.createTempDirectory=function(r,e){var i=this;void 0===e&&(e=!0);var o=this.getOSTempDirectory(),s=o+this.dirSep()+this.findUniqueDirectoryName(o,r);if(!this.createDirectory(s))throw new Error(\"Could not create TMP directory \"+s);return e&&(t._tempDirectoriesToDelete.push(s),t._tempDirectoriesToDelete.length<2&&process.once(\"exit\",function(){for(var r=0,e=t._tempDirectoriesToDelete;r<e.length;r++){var o=e[r];i.isDirectory(o)&&i.deleteDirectory(o)}})),s},t.prototype.getDirectoryList=function(t,r){void 0===r&&(r=\"\"),t=this._composePath(t,!0);for(var e=[],i=0,o=this.fs.readdirSync(t);i<o.length;i++){var s=o[i];if(\".\"!==s&&\"..\"!==s)switch(r){case\"mDateAsc\":case\"mDateDesc\":break;default:e.push(s)}}switch(r){case\"nameAsc\":e.sort();break;case\"nameDesc\":e.sort(),e.reverse();break;case\"mDateAsc\":case\"mDateDesc\":break;default:if(\"\"!==r)throw new Error(\"Unknown sort method\")}return e},t.prototype.getDirectorySize=function(t){t=this._composePath(t);for(var r=0,e=0,i=this.getDirectoryList(t);e<i.length;e++){var o=i[e],s=t+this.dirSep()+o;r+=this.isDirectory(s)?this.getDirectorySize(s):this.getFileSize(s)}return r},t.prototype.copyDirectory=function(t,r,e){if(void 0===e&&(e=!0),(t=this._composePath(t))===(r=this._composePath(r)))throw new Error(\"cannot copy a directory into itself: \"+t);if(e&&!this.isDirectoryEmpty(r))throw new Error(\"destPath must be empty\");for(var i=0,o=this.getDirectoryList(t);i<o.length;i++){var s=o[i],n=t+this.dirSep()+s,h=r+this.dirSep()+s;if(this.isDirectory(n)){if(!this.isDirectory(h)&&!this.createDirectory(h))return!1;if(!this.copyDirectory(n,h,e))return!1}else if(!this.copyFile(n,h))return!1}return!0},t.prototype.mirrorDirectory=function(t,r,e){if(void 0===e&&(e=15),(t=this._composePath(t,!0))===(r=this._composePath(r,!0)))throw new Error(\"cannot mirror a directory into itself: \"+t);for(var i=0,o=this.getDirectoryList(t);i<o.length;i++){var s=o[i],n=t+this.dirSep()+s,h=r+this.dirSep()+s,c=this.isDirectory(h),a=this.isFile(h);if(this.isDirectory(n))a&&this.deleteFile(h,e),c||this.createDirectory(h),this.mirrorDirectory(n,h,e);else if(c&&this.deleteDirectory(h,!0,e),!(a&&this.isFileEqualTo(n,h)||this.copyFile(n,h)))throw new Error(\"Could not copy file from source <\"+n+\"> to destination <\"+h+\">\")}for(var p=0,u=this.getDirectoryList(r);p<u.length;p++){var m=u[p];n=t+this.dirSep()+m,h=r+this.dirSep()+m;this.isDirectory(h)?this.isDirectory(n)?this.mirrorDirectory(n,h,e):this.deleteDirectory(h,!0,e):this.isFile(n)||this.deleteFile(h,e)}return!0},t.prototype.syncDirectories=function(){},t.prototype.renameDirectory=function(t,r,e){return void 0===e&&(e=15),this._renameFSResource(this._composePath(t,!0),this._composePath(r),e)},t.prototype._renameFSResource=function(t,r,e){if(this.isDirectory(r)||this.isFile(r))throw new Error(\"Invalid destination: \"+r);if(this.path.resolve(turbocommons_ts_1.StringUtils.getPath(t))!==this.path.resolve(turbocommons_ts_1.StringUtils.getPath(r)))throw new Error(\"Source and dest must be on the same path\");var i=\"\",o=0,s=Math.floor(Date.now()/1e3);do{try{return this.fs.renameSync(t,r),!0}catch(t){i=t.toString()}o=Math.floor(Date.now()/1e3)-s}while(o<e);throw new Error(\"Error renaming (\"+o+\" seconds timeout):\\n\"+t+\"\\n\"+i)},t.prototype.deleteDirectory=function(t,r,e){void 0===r&&(r=!0),void 0===e&&(e=15);var i=0;t=this._composePath(t,!0);for(var o=0,s=this.getDirectoryList(t);o<s.length;o++){var n=s[o];this.isDirectory(t+this.dirSep()+n)?i+=this.deleteDirectory(t+this.dirSep()+n,!0,e):(this.deleteFile(t+this.dirSep()+n,e),i++)}if(r){var h=\"\",c=0,a=Math.floor(Date.now()/1e3);do{try{return this.fs.rmdirSync(t),i}catch(t){h=t.toString()}c=Math.floor(Date.now()/1e3)-a}while(c<e);throw new Error(\"Could not delete directory itself (\"+c+\" seconds timeout):\\n\"+t+\"\\n\"+h)}return i},t.prototype.saveFile=function(t,r,e,i){void 0===r&&(r=\"\"),void 0===e&&(e=!1),void 0===i&&(i=!1),t=this._composePath(t),i&&this.createDirectory(turbocommons_ts_1.StringUtils.getPath(t),!0);try{return e?this.fs.appendFileSync(t,r):this.fs.writeFileSync(t,r),!0}catch(r){throw new Error(\"Could not write to file: \"+t)}},t.prototype.createTempFile=function(){},t.prototype.mergeFiles=function(t,r,e){void 0===e&&(e=\"\");for(var i=\"\",o=0;o<t.length;o++)i+=this.readFile(this._composePath(t[o])),o<t.length-1&&\"\"!==e&&(i+=e);return this.saveFile(r,i)},t.prototype.getFileSize=function(t){t=this._composePath(t,!1,!0);try{return this.fs.statSync(t).size}catch(t){throw new Error(\"Error reading file size\")}},t.prototype.getFileModificationTime=function(t){return t},t.prototype.readFile=function(t){return t=this._composePath(t,!1,!0),this.fs.readFileSync(t,\"utf8\")},t.prototype.readFileBuffered=function(){},t.prototype.copyFile=function(t,r){t=this._composePath(t),r=this._composePath(r);try{return this.fs.copyFileSync(t,r),!0}catch(t){return!1}},t.prototype.renameFile=function(t,r,e){return void 0===e&&(e=15),this._renameFSResource(this._composePath(t,!1,!0),this._composePath(r),e)},t.prototype.deleteFile=function(t,r){void 0===r&&(r=15),t=this._composePath(t,!1,!0);var e=\"\",i=0,o=Math.floor(Date.now()/1e3);do{try{return this.fs.unlinkSync(t),!0}catch(t){e=t.toString()}i=Math.floor(Date.now()/1e3)-o}while(i<r);throw new Error(\"Error deleting file (\"+i+\" seconds timeout):\\n\"+t+\"\\n\"+e)},t.prototype.deleteFiles=function(t,r){void 0===r&&(r=15);for(var e=0,i=t;e<i.length;e++){var o=i[e];this.deleteFile(o,r)}return!0},t.prototype._generateUniqueNameAux=function(t,r,e,i,o){var s=[];return o?(\"\"!==e&&s.push(e),s.push(String(t)),\"\"!==r&&s.push(r)):(\"\"!==r&&s.push(r),\"\"!==e&&s.push(e),s.push(String(t))),s.join(i)},t.prototype._composePath=function(t,r,e){if(void 0===r&&(r=!1),void 0===e&&(e=!1),!turbocommons_ts_1.StringUtils.isString(t))throw new Error(\"Path must be a string\");var i=\"\";i=turbocommons_ts_1.StringUtils.isEmpty(this._rootPath)||this.isPathAbsolute(t)?t:this._rootPath+this.dirSep()+t;var o=turbocommons_ts_1.StringUtils.formatPath(i,this.dirSep());if(r&&!this.isDirectory(o))throw new Error(\"Path does not exist: \"+o);if(e&&!this.isFile(o))throw new Error(\"File does not exist: \"+o);return o},t._tempDirectoriesToDelete=[],t}();exports.FilesManager=FilesManager;"]},"metadata":{},"sourceType":"script"}